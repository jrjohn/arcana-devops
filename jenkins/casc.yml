jenkins:
  systemMessage: "Jenkins DevOps Starter Kit â€” Managed by JCasC"
  numExecutors: 4
  mode: NORMAL
  securityRealm:
    local:
      allowsSignup: false
      users:
        - id: "admin"
          password: "${JENKINS_ADMIN_PASSWORD:-admin}"
  authorizationStrategy:
    loggedInUsersCanDoAnything:
      allowAnonymousRead: false
  globalNodeProperties:
    - envVars:
        env:
          - key: "DOCKER_REGISTRY"
            value: "${DOCKER_REGISTRY:-localhost:5000}"
          - key: "PROJECTS_DIR"
            value: "${PROJECTS_DIR}"
  nodes:
    - permanent:
        name: "macmini"
        remoteFS: "${MACMINI_REMOTE_FS:-/Users/jrjohn/jenkins-agent}"
        numExecutors: 2
        mode: EXCLUSIVE
        labelString: "macos ios"
        retentionStrategy: "always"
        launcher:
          jnlp:
            webSocket: true
    - permanent:
        name: "windows"
        remoteFS: "${WINDOWS_REMOTE_FS:-C:\\jenkins-agent}"
        numExecutors: 2
        mode: EXCLUSIVE
        labelString: "windows"
        retentionStrategy: "always"
        launcher:
          jnlp:
            webSocket: true

credentials:
  system:
    domainCredentials:
      - credentials:
          - basicSSHUserPrivateKey:
              scope: GLOBAL
              id: "macmini-ssh"
              username: "${MACMINI_USER}"
              description: "Mac Mini SSH Key"
              privateKeySource:
                directEntry:
                  privateKey: "${MACMINI_SSH_KEY}"
          - basicSSHUserPrivateKey:
              scope: GLOBAL
              id: "windows-ssh"
              username: "${WINDOWS_USER}"
              description: "Windows SSH Key"
              privateKeySource:
                directEntry:
                  privateKey: "${WINDOWS_SSH_KEY}"
          - string:
              scope: GLOBAL
              id: "sonarqube-token"
              description: "SonarQube Authentication Token"
              secret: "${SONARQUBE_TOKEN}"
          - usernamePassword:
              scope: GLOBAL
              id: "github-credentials"
              username: "jrjohn"
              password: "${GITHUB_TOKEN}"
              description: "GitHub PAT for SCM polling"

unclassified:
  location:
    url: "${JENKINS_URL:-https://arcana.boo/jenkins/}"
  sonarGlobalConfiguration:
    buildWrapperEnabled: true
    installations:
      - name: "SonarQube"
        serverUrl: "${SONAR_HOST_URL:-http://sonarqube:9000/sonarqube}"
        credentialsId: "sonarqube-token"
